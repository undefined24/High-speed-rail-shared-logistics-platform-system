<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper    
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"    
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.undefined24.ssm.dao.UserMapper">

<insert id="Register" parameterType="user" useGeneratedKeys="true">
insert into user_info(nickname,userpwd,userphone,useraddress,usersex,usernumber) values(#{nickname},#{userpwd},#{userphone},#{useraddress},#{usersex},#{usernumber})
</insert>

<select id="Login" resultType="user" parameterType="user">
select * from user_info where nickname=#{nickname} and userpwd=#{userpwd}
</select>

<select id="CheckUser" resultType="user" parameterType="user">
select * from user_info where nickname=#{nickname}
</select>

<update id="ChangePwd" parameterType="user" >
update user_info set userpwd=#{userpwd} where userID = #{userID}
</update>

<update id="ChangeProfile" parameterType="user" >
update user_info
<set>
<if test="useraddress">useraddress=#{useraddress},</if>
<if test="usersex!=null">usersex=#{usersex},</if>
<if test="userbirthday!=null">userbirthday=#{userbirthday},</if>
<if test="note!=null">note=#{note}</if>
</set>
where userID = #{userID}
</update>

<select id="giveUserHistory" parameterType="int">
select * from history where giveUserID=#{giveUserID}
</select>

<select id="acceptUserHistory" parameterType="int">
select * from history where acceptUserID=#{acceptUserID}
</select>
</mapper>